<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Smart Multi Calculator</title>
  <style>
    :root {
      --bg: #f5f7fb;
      --text: #222;
      --card: #fff;
      --accent: #0066cc;
      --accent-dark: #004999;
    }
    [data-theme="dark"] {
      --bg: #121212;
      --text: #f5f5f5;
      --card: #1e1e1e;
      --accent: #4da6ff;
      --accent-dark: #1a73e8;
    }
    body {
      margin: 0; font-family: Arial, sans-serif;
      background: var(--bg); color: var(--text);
      transition: background 0.3s, color 0.3s;
    }
    header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 1rem; background: var(--accent); color: #fff;
    }
    header h1 { margin: 0; font-size: 1.2rem; }
    .toggle-btn {
      background: #fff; color: var(--accent);
      border: none; padding: 0.5rem 1rem; border-radius: 1rem;
      cursor: pointer; font-weight: bold;
    }
    .container {
      max-width: 600px; margin: 1rem auto; padding: 1rem;
    }
    .menu {
      display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;
    }
    .menu button {
      background: var(--card); border: 2px solid var(--accent);
      padding: 1rem; border-radius: 1rem;
      cursor: pointer; font-size: 1rem; font-weight: bold;
      transition: all 0.3s;
    }
    .menu button:hover {
      background: var(--accent); color: #fff;
    }
    .calculator {
      display: none; background: var(--card);
      padding: 1.5rem; border-radius: 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
    .calculator.active { display: block; }
    h2 { margin-top: 0; }
    input, select, button {
      margin: 0.3rem 0; padding: 0.5rem; font-size: 1rem;
      border-radius: 0.5rem; border: 1px solid #ccc; width: 100%;
    }
    button.action {
      background: var(--accent); color: #fff;
      border: none; cursor: pointer; font-weight: bold;
    }
    button.action:hover { background: var(--accent-dark); }
    .result {
      background: var(--bg); padding: 1rem;
      margin-top: 1rem; border-radius: 0.5rem;
      font-weight: bold;
    }
    .history {
      margin-top: 1rem; font-size: 0.9rem;
      background: var(--bg); padding: 0.5rem;
      border-radius: 0.5rem; max-height: 150px; overflow-y: auto;
    }
    .back-btn {
      margin-top: 1rem;
      background: transparent; border: 2px solid var(--accent);
      color: var(--accent); cursor: pointer; padding: 0.5rem 1rem;
      border-radius: 1rem; font-weight: bold;
    }
    .back-btn:hover {
      background: var(--accent); color: #fff;
    }
  </style>
</head>
<body data-theme="light">
  <header>
    <h1>Smart Multi Calculator</h1>
    <button class="toggle-btn" onclick="toggleTheme()">‚òÄÔ∏è/üåô</button>
  </header>
  <div class="container">
    <!-- Main Menu -->
    <div id="mainMenu" class="menu">
      <button onclick="openCalc('basic')">Basic Calculator</button>
      <button onclick="openCalc('scientific')">Scientific</button>
      <button onclick="openCalc('finance')">Financial</button>
      <button onclick="openCalc('stats')">Statistics</button>
      <button onclick="openCalc('date')">Date & Time</button>
    </div>

    <!-- Basic Calculator -->
    <div id="basic" class="calculator">
      <h2>Basic Calculator</h2>
      <input type="number" id="num1" aria-label="First number" placeholder="Enter number">
      <input type="number" id="num2" aria-label="Second number" placeholder="Enter number">
      <select id="operation">
        <option value="add">+</option>
        <option value="sub">-</option>
        <option value="mul">√ó</option>
        <option value="div">√∑</option>
      </select>
      <button class="action" onclick="calculateBasic()">Calculate</button>
      <button class="action" onclick="clearBasic()">Clear</button>
      <div id="basicResult" class="result">Result: -</div>
      <div>
        <button onclick="memoryAdd()">M+</button>
        <button onclick="memoryRecall()">MR</button>
        <button onclick="memoryClear()">MC</button>
      </div>
      <div class="history" id="basicHistory"></div>
      <button class="back-btn" onclick="goBack()">‚¨Ö Back to Menu</button>
    </div>

    <!-- Scientific Calculator -->
    <div id="scientific" class="calculator">
      <h2>Scientific Calculator</h2>
      <input type="text" id="sciInput" placeholder="Enter expression e.g. sin(45) + log(10)">
      <button class="action" onclick="calculateScientific()">Calculate</button>
      <div id="sciResult" class="result">Result: -</div>
      <button class="back-btn" onclick="goBack()">‚¨Ö Back to Menu</button>
    </div>

    <!-- Financial Calculator -->
    <div id="finance" class="calculator">
      <h2>Financial Calculator</h2>
      <label>Principal:</label>
      <input type="number" id="principal" placeholder="Enter amount">
      <label>Rate (%):</label>
      <input type="number" id="rate" placeholder="Enter rate">
      <label>Time (years):</label>
      <input type="number" id="time" placeholder="Enter years">
      <select id="financeType">
        <option value="simple">Simple Interest</option>
        <option value="compound">Compound Interest</option>
      </select>
      <button class="action" onclick="calculateFinance()">Calculate</button>
      <div id="financeResult" class="result">Result: -</div>
      <button class="back-btn" onclick="goBack()">‚¨Ö Back to Menu</button>
    </div>

    <!-- Statistics Calculator -->
    <div id="stats" class="calculator">
      <h2>Statistics Calculator</h2>
      <input type="text" id="statsInput" placeholder="Enter numbers separated by comma">
      <button class="action" onclick="calculateStats()">Calculate</button>
      <div id="statsResult" class="result">Result: -</div>
      <button class="back-btn" onclick="goBack()">‚¨Ö Back to Menu</button>
    </div>

    <!-- Date Calculator -->
    <div id="date" class="calculator">
      <h2>Date Difference Calculator</h2>
      <label>Start Date:</label>
      <input type="date" id="date1">
      <label>End Date:</label>
      <input type="date" id="date2">
      <button class="action" onclick="calculateDate()">Calculate</button>
      <div id="dateResult" class="result">Result: -</div>
      <button class="back-btn" onclick="goBack()">‚¨Ö Back to Menu</button>
    </div>
  </div>

  <script>
    let memory = null;
    let history = [];

    function toggleTheme(){
      const body = document.body;
      body.dataset.theme = (body.dataset.theme === "light") ? "dark" : "light";
    }
    function openCalc(id){
      document.getElementById("mainMenu").style.display="none";
      document.querySelectorAll(".calculator").forEach(c=>c.classList.remove("active"));
      document.getElementById(id).classList.add("active");
    }
    function goBack(){
      document.getElementById("mainMenu").style.display="grid";
      document.querySelectorAll(".calculator").forEach(c=>c.classList.remove("active"));
    }

    function calculateBasic(){
      let n1=parseFloat(document.getElementById("num1").value);
      let n2=parseFloat(document.getElementById("num2").value);
      let op=document.getElementById("operation").value;
      if(isNaN(n1)||isNaN(n2)){alert("Enter numbers!");return;}
      let res;
      if(op==="add") res=n1+n2;
      else if(op==="sub") res=n1-n2;
      else if(op==="mul") res=n1*n2;
      else if(op==="div") res=n2!==0?n1/n2:"Error";
      document.getElementById("basicResult").innerText="Result: "+res;
      history.push(`${n1} ${op} ${n2} = ${res}`);
      renderHistory();
    }
    function clearBasic(){
      document.getElementById("num1").value="";
      document.getElementById("num2").value="";
      document.getElementById("basicResult").innerText="Result: -";
    }
    function renderHistory(){
      let h=document.getElementById("basicHistory");
      h.innerHTML=history.slice(-10).map(x=>"<div>"+x+"</div>").join("");
    }
    function memoryAdd(){
      let res=document.getElementById("basicResult").innerText.replace("Result: ","");
      if(res!=="-") memory=parseFloat(res);
    }
    function memoryRecall(){
      if(memory!==null) document.getElementById("num1").value=memory;
    }
    function memoryClear(){memory=null;}

    function calculateScientific(){
      try{
        let expr=document.getElementById("sciInput").value;
        let replaced=expr.replace(/sin/gi,"Math.sin")
                         .replace(/cos/gi,"Math.cos")
                         .replace(/tan/gi,"Math.tan")
                         .replace(/log/gi,"Math.log10")
                         .replace(/ln/gi,"Math.log")
                         .replace(/sqrt/gi,"Math.sqrt")
                         .replace(/pi/gi,"Math.PI")
                         .replace(/exp/gi,"Math.exp")
                         .replace(/\^/g,"**");
        let res=eval(replaced);
        document.getElementById("sciResult").innerText="Result: "+res;
      }catch(e){alert("Invalid expression");}
    }

    function calculateFinance(){
      let p=parseFloat(document.getElementById("principal").value);
      let r=parseFloat(document.getElementById("rate").value)/100;
      let t=parseFloat(document.getElementById("time").value);
      let type=document.getElementById("financeType").value;
      if(isNaN(p)||isNaN(r)||isNaN(t)){alert("Fill all fields");return;}
      let res;
      if(type==="simple") res=p+(p*r*t);
      else res=p*Math.pow(1+r,t);
      document.getElementById("financeResult").innerText="Result: "+res.toFixed(2);
    }

    function calculateStats(){
      let arr=document.getElementById("statsInput").value.split(",").map(Number);
      arr=arr.filter(x=>!isNaN(x));
      if(arr.length===0){alert("Enter numbers!");return;}
      let mean=arr.reduce((a,b)=>a+b,0)/arr.length;
      let sorted=[...arr].sort((a,b)=>a-b);
      let median=sorted.length%2?sorted[Math.floor(sorted.length/2)]
        :(sorted[sorted.length/2-1]+sorted[sorted.length/2])/2;
      let variance=arr.reduce((a,b)=>a+(b-mean)**2,0)/arr.length;
      let std=Math.sqrt(variance);
      let mode = arr.sort((a,b)=>
        arr.filter(v=>v===a).length-arr.filter(v=>v===b).length).pop();
      let range=sorted[sorted.length-1]-sorted[0];
      document.getElementById("statsResult").innerText=
        `Mean: ${mean}, Median: ${median}, Mode: ${mode}, Variance: ${variance.toFixed(2)}, StdDev: ${std.toFixed(2)}, Range: ${range}`;
    }

    function calculateDate(){
      let d1=new Date(document.getElementById("date1").value);
      let d2=new Date(document.getElementById("date2").value);
      if(isNaN(d1)||isNaN(d2)){alert("Select both dates");return;}
      let diff=Math.abs(d2-d1)/(1000*3600*24);
      document.getElementById("dateResult").innerText="Difference: "+diff+" days";
    }
  </script>
</body>
</html>
